<html>
<head>
  <title>Hitchhiker's Guide to the WaveDrom</title>
  <link rel="shortcut icon" href="images/favicon.ico"/>
  <script type="text/javascript" src="skins/default.js"></script>
  <script type="text/javascript" src="WaveDrom.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Inconsolata|Varela+Round' rel='stylesheet' type='text/css'>
  <link href="tutorial.css" media="screen" rel="Stylesheet" type="text/css" /> 
</head>

<body onload="WaveDrom.ProcessAll()">

<div class="content">

<h1>Hitchhiker's Guide to the WaveDrom</h1>

<a href="http://wavedrom.googlecode.com">WaveDrom</a> is an JavaScript application and WaveJSON format allows describtion of
Digital Timing Diagrams and its rendering them directly inside the browser.
Timing digram described as JSON data structure.
Element <span class="fixed">"signal"</span> is an array of wavelanes.
Each wavelane has two mandatory fileds: <span class="fixed">"name"</span>
 and <span class="fixed">"wave"</span>.

<h2>Step 1. The Signal</h2>

Lets start with the quick example.
Following code will create 1-bit signal named <span class="fixed">"Alfa"</span>
 that changes it's state over time.

<pre>
{ "signal" : [{ "name": "Alfa", "wave": "01.zx=ud.23.45" }] }
</pre>

Every character in the <span class="fixed">"wave"</span> string represents single time period.
Symbol <span class="fixed">"."</span> extends previous state for one more period.
Here is how it looks like:

<script type="WaveDrom">
{ "signal" : [{ "name": "Alfa", "wave": "01.zx=ud.23.45" }] }
</script>


<h2>Step 2. Adding Clock</h2>

Digital clock is the special type of signal.
It changes twice per time period and can have positive or negative polarity.
It also can have optional marker on the working edge.
Clock blocks can be mixed with other signal states to create clock gating effects.
Here is the code:

<pre class="WaveDrom">
{ "signal" : [
  { "name": "pclk", "wave": "p....." },
  { "name": "Pclk", "wave": "P....." },
  { "name": "nclk", "wave": "n....." },
  { "name": "Nclk", "wave": "N....." },
  { "name": "gclk", "wave": "0P0P.." } // gated clock
]}
</pre>

And the rendered diagram:

<script type="WaveDrom">
{ "signal" : [
  { "name": "pclk", "wave": "p....." },
  { "name": "Pclk", "wave": "P....." },
  { "name": "nclk", "wave": "n....." },
  { "name": "Nclk", "wave": "N....." },
  { "name": "gclk", "wave": "0P0P.." } // gated clock
]}
</script>


<h2>Step 3. Putting all together</h2>

Typical timing diagram would have clock and signals (wires).
Multi-bit signals will try grabbing labels from <span class="fixed">"data"</span> array.

<pre>
{ "signal" : [
  { "name": "clk",  "wave": "P......" },
  { "name": "bus",  "wave": "x.==.=x", "data": ["head", "body", "tail", "data"] },
  { "name": "wire", "wave": "0.1..0." }
]}
</pre>

<script type="WaveDrom">
{ "signal" : [
  { "name": "clk",  "wave": "P......" },
  { "name": "bus",  "wave": "x.==.=x", "data": ["head", "body", "tail", "data"] },
  { "name": "wire", "wave": "0.1..0." }
]}
</script>

<h2>Step 4. Spacers and Gaps</h2>

<pre>
{ "signal" : [
  { "name": "clk →",         "wave": "p.....|..." },
  { "name": "Data ⇒",        "wave": "x.345x|=.x", "data": ["head", "body", "tail", "data"] },
  { "name": "Request →",     "wave": "0.1..0|1.0" },
  {},
  { "name": "Acknowledge ←", "wave": "1.....|01." }
]}
</pre>

<script type="WaveDrom">
{ "signal" : [
  { "name": "clk →",         "wave": "p.....|..." },
  { "name": "Data ⇒",        "wave": "x.345x|=.x", "data": ["head", "body", "tail", "data"] },
  { "name": "Request →",     "wave": "0.1..0|1.0" },
  {},
  { "name": "Acknowledge ←", "wave": "1.....|01." }
]}
</script>

<h2>Step 5. Groups</h2>

<pre>
{ "signal" : [
 {   "name": "clk",    "wave": "P......." },
 [ "Master",
  [ "control",
   { "name": "write",  "wave": "01.0...." },
   { "name": "read",   "wave": "0...1..0" },
  ],
  {  "name": "addr",   "wave": "x3.x4..x", "data": ["A₁","A₂"] },
  {  "name": "byteen", "wave": "x3.x4..x", "data": ["BE₁","BE₂"] },
  {  "name": "wdata",  "wave": "x3.x....", "data": ["D₁"] },
 ],
 [ "Slave",
  [ "control",
   { "name": "accept", "wave": "x01x0.1x" },
  ],
  {  "name": "rdata",  "wave": "x.....4x", "data": ["D2"] },
 ]
]}
</pre>

<script type="WaveDrom">
{ "signal" : [
 {   "name": "clk",    "wave": "P......." },
 [ "Master",
  [ "control",
   { "name": "write",  "wave": "01.0...." },
   { "name": "read",   "wave": "0...1..0" },
  ],
  {  "name": "addr",   "wave": "x3.x4..x", "data": ["A₁","A₂"] },
  {  "name": "byteen", "wave": "x3.x4..x", "data": ["BE₁","BE₂"] },
  {  "name": "wdata",  "wave": "x3.x....", "data": ["D₁"] },
 ],
 [ "Slave",
  [ "control",
   { "name": "accept", "wave": "x01x0.1x" },
  ],
  {  "name": "rdata",  "wave": "x.....4x", "data": ["D₂"] },
 ]
]}
</script>

<h2>Step 6. Period and Phase</h2>

<span class="fixed">"period"</span> and <span class="fixed">"phase"</span> parameters can be used to adjust each WaveLane.

<h3>DDR Read transaction</h3>

<pre>
{ "signal" : [
  { "name": "CK",  "wave": "P.......",                                                                     "period":2 },
  { "name": "CMD", "wave": "x.3x=x4x=x=x=x=x", "data" : ["RAS", "NOP", "CAS", "NOP", "NOP", "NOP", "NOP"], "phase":0.5 },
  { "name": "ADDR","wave": "x.=x..=x........", "data" : ["ROW", "COL"],                                    "phase":0.5 },
  { "name": "DQS", "wave": "z.......0.1010z." },
  { "name": "DQ",  "wave": "z.........5555z.", "data" : ["D⁰","D¹","D²","D³"] }
]}
</pre>

<script type="WaveDrom">
{ "signal" : [
  { "name": "CK",  "wave": "P.......",                                                                     "period":2 },
  { "name": "CMD", "wave": "x.3x=x4x=x=x=x=x", "data" : ["RAS", "NOP", "CAS", "NOP", "NOP", "NOP", "NOP"], "phase":0.5 },
  { "name": "ADDR","wave": "x.=x..=x........", "data" : ["ROW", "COL"],                                    "phase":0.5 },
  { "name": "DQS", "wave": "z.......0.1010z." },
  { "name": "DQ",  "wave": "z.........5555z.", "data" : ["D⁰","D¹","D²","D³"] }
]}
</script>

<h2>Step 7. config</h2>

The <span class="fixed">config:{...}</span> property controls different aspects of rendering.

<h3>hscale</h3>

<span class="fixed">config:{hscale:#}</span> property controls the horizontal scale of the diagram. User can put any integer number greater then 0.

<pre>
{ "signal" : [
  { "name": "clk",         "wave": "p...." },
  { "name": "Data",        "wave": "x345x", "data": ["head", "body", "tail"] },
  { "name": "Request",     "wave": "01..0" }
],
  "config" : { "hscale" : # }
}
</pre>

<h3>hscale = 1 (default)</h3>

<script type="WaveDrom">
{ "signal" : [
  { "name": "clk",         "wave": "p...." },
  { "name": "Data",        "wave": "x345x", "data": ["head", "body", "tail"] },
  { "name": "Request",     "wave": "01..0" }
]}
</script>

<h3>hscale = 2</h3>

<script type="WaveDrom">
{ "signal" : [
  { "name": "clk",         "wave": "p...." },
  { "name": "Data",        "wave": "x345x", "data": ["head", "body", "tail"] },
  { "name": "Request",     "wave": "01..0" }
],
  "config" : { "hscale" : 2 }
}
</script>

<h3>hscale = 3</h3>

<script type="WaveDrom">
{ "signal" : [
  { "name": "clk",         "wave": "p...." },
  { "name": "Data",        "wave": "x345x", "data": ["head", "body", "tail"] },
  { "name": "Request",     "wave": "01..0" }
],
  "config" : { "hscale" : 3 }
}
</script>

<h2>Step 8. Arrows</h2>

<h3>Splines</h3>

<pre>
 ~    -~
<~>  <-~>
 ~>   -~>  ~->
</pre>

<pre>
{ signal: [
  { name: 'A', wave: '01........0....',  node: '.a........j' },
  { name: 'B', wave: '0.1.......0.1..',  node: '..b.......i' },
  { name: 'C', wave: '0..1....0...1..',  node: '...c....h..' },
  { name: 'D', wave: '0...1..0.....1.',  node: '....d..g...' },
  { name: 'E', wave: '0....10.......1',  node: '.....ef....' }
],
edge: ['a~b t₁', 'c-~a t₂', 'c-~>d time 3', 'd~-e', 'e~>f', 'f->g', 'g-~>h', 'h~>i some text', 'h~->j']
}
</pre>

<script type="WaveDrom">
{ signal: [
  { name: 'A', wave: '01........0....',  node: '.a........j' },
  { name: 'B', wave: '0.1.......0.1..',  node: '..b.......i' },
  { name: 'C', wave: '0..1....0...1..',  node: '...c....h..' },
  { name: 'D', wave: '0...1..0.....1.',  node: '....d..g...' },
  { name: 'E', wave: '0....10.......1',  node: '.....ef....' }
],
edge: ['a~b t₁', 'c-~a t₂', 'c-~>d time 3', 'd~-e', 'e~>f', 'f->g', 'g-~>h', 'h~>i some text', 'h~->j']
}
</script>

<h3>Sharp lines</h3>

<pre>
 -   -|   -|-
<-> <-|> <-|->
 ->  -|>  -|->  |->
</pre>

<pre>
{ signal: [
  { name: 'A', wave: '01..0..',  node: '.a..e..' },
  { name: 'B', wave: '0.1..0.',  node: '..b..d.', phase:0.5 },
  { name: 'C', wave: '0..1..0',  node: '...c..f' },
  {                              node: '...g..h' }
],
  edge: ['b-|a t₁', 'a-|c t₂', 'b-|-c t₃', 'c-|->e t₄', 'e-|>f more text', 'e|->d t₆', 'c-g', 'f-h', 'g<->h 3 ms']
}
</pre>

<script type="WaveDrom">
{ signal: [
  { name: 'A', wave: '01..0..',  node: '.a..e..' },
  { name: 'B', wave: '0.1..0.',  node: '..b..d.', phase:0.5 },
  { name: 'C', wave: '0..1..0',  node: '...c..f' },
  {                              node: '...g..h' }
],
  edge: ['b-|a t₁', 'a-|c t₂', 'b-|-c t₃', 'c-|->e t₄', 'e-|>f more text', 'e|->d t₆', 'c-g', 'f-h', 'g<->h 3 ms']
}
</script>

</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21660728-1']);
  _gaq.push(['_setDomainName', 'wavedrom.googlecode.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
